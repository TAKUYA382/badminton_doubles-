<%# 共通フォーム: 新規/編集共用 %>
<%= form_with model: [:admin, @event], local: true do |f| %>
  <% if @event.errors.any? %>
    <div class="card" style="border:1px solid #fca5a5; background:#fee2e2; color:#991b1b; margin-bottom:12px;">
      <strong>入力エラーがあります（<%= @event.errors.count %>件）</strong>
      <ul style="margin:6px 0 0 18px;">
        <% @event.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="card">
    <div class="form-row">
      <div class="field">
        <label>タイトル</label>
        <%= f.text_field :title, placeholder: "例）学内練習会" %>
      </div>

      <div class="field">
        <label>日付</label>
        <%= f.date_field :date %>
      </div>

      <div class="field" style="max-width:160px;">
        <label>コート数</label>
        <%= f.number_field :court_count, min: 1, step: 1, value: (@event.court_count || 2) %>
      </div>

      <div class="field" style="max-width:220px;">
        <label>公開状態</label>
        <%= f.select :status,
              Event.statuses.keys.map { |k| [I18n.t("enums.event.status.#{k}", default: k.humanize), k] },
              { selected: (@event.status || "draft") } %>
      </div>
    </div>
  </div>

  <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
    <%= f.submit (@event.new_record? ? "作成する" : "更新する"), class: "btn btn-primary" %>
    <%= link_to "キャンセル", @event.new_record? ? admin_events_path : admin_event_path(@event), class: "btn btn-outline" %>
  </div>
<% end %>